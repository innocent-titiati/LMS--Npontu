<html>
<head>
    <title>Quiz Page</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet"/>
    <style>
        body {
            font-family: 'Roboto', sans-serif;
        }
        #results {
            display: none;
        }
    </style>
</head>
<body class="bg-blue-50 relative">
    <div class="flex">
        <!-- Sidebar -->
        <div class="w-1/4 bg-white h-screen shadow-lg fixed">
            <div class="p-4">
                <img src="../Manager Ui 3/images/sign_in___sign_up/logo_u45-0.png" alt="Npontu Learning Hub logo" width="150" height="50" class="mb-4"/>
            </div>
            <nav class="text-lg">
                <ul>
                    <li class="py-2 px-4 hover:bg-blue-100">Overview</li>
                    <li class="py-2 px-4 hover:bg-blue-100">Week 1</li>
                    <li class="py-2 px-4 hover:bg-blue-100">Week 2</li>
                    <li class="py-2 px-4 hover:bg-blue-100">Week 3</li>
                    <li class="py-2 px-4 hover:bg-blue-100">Week 4</li>
                    <li class="py-2 px-4 hover:bg-blue-100">Week 5</li>
                    <li class="py-2 px-4 hover:bg-blue-100">Week 6</li>
                    <li class="py-2 px-4 hover:bg-blue-100">Week 7</li>
                </ul>
            </nav>
            <div class="absolute bottom-0 w-full p-4">
                <button class="bg-teal-500 text-white py-2 px-4 rounded hover:bg-teal-700" onclick="submitResults()">Display results</button>
            </div>
        </div>
        <!-- Main Content -->
        <div class="w-3/4 ml-1/4 p-8 absolute left-[25rem] w-[60%]">
            <h1 class="text-2xl font-bold mb-4">MODULE TITLE</h1>
            <div id="quiz-container" class="bg-blue-50 p-8 rounded shadow-lg">
                <!-- Quiz Card 1 -->
                <div class="quiz-card">
                    <h2 class="text-xl font-bold mb-4">Quiz Title 1</h2>
                    <p class="text-lg mb-2">The question to be asked 1</p>
                    <p class="text-sm mb-4">Question 1 of 20</p>
                    <div class="space-y-4 mb-4">
                        <div class="flex items-center">
                            <input type="radio" name="option1" value="Option 1" class="mr-2" onchange="updateAnswer(0, this.value)"/>
                            <label class="w-full bg-gray-200 p-2 rounded">Option 1</label>
                        </div>
                        <div class="flex items-center">
                            <input type="radio" name="option1" value="Option 2" class="mr-2" onchange="updateAnswer(0, this.value)"/>
                            <label class="w-full bg-gray-200 p-2 rounded">Option 2</label>
                        </div>
                        <div class="flex items-center">
                            <input type="radio" name="option1" value="Option 3" class="mr-2" onchange="updateAnswer(0, this.value)"/>
                            <label class="w-full bg-gray-200 p-2 rounded">Option 3</label>
                        </div>
                        <div class="flex items-center">
                            <input type="radio" name="option1" value="Option 4" class="mr-2" onchange="updateAnswer(0, this.value)"/>
                            <label class="w-full bg-gray-200 p-2 rounded">Option 4</label>
                        </div>
                    </div>
                    <div class="flex justify-between items-center">
                        <button class="bg-white border border-gray-300 text-gray-700 py-2 px-4 rounded" onclick="prevQuiz()">Previous</button>
                        <button class="bg-white border border-gray-300 text-gray-700 py-2 px-4 rounded" id="next-button" onclick="nextQuiz()">Next</button>
                        <p class="text-sm" id="timer">Time: 30</p>
                    </div>
                </div>
                <!-- Quiz Card 2 -->
                <div class="quiz-card hidden">
                    <h2 class="text-xl font-bold mb-4">Quiz Title 2</h2>
                    <p class="text-lg mb-2">The question to be asked 2</p>
                    <p class="text-sm mb-4">Question 2 of 20</p>
                    <div class="space-y-4 mb-4">
                        <div class="flex items-center">
                            <input type="radio" name="option2" value="Option 1" class="mr-2" onchange="updateAnswer(1, this.value)"/>
                            <label class="w-full bg-gray-200 p-2 rounded">Option 1</label>
                        </div>
                        <div class="flex items-center">
                            <input type="radio" name="option2" value="Option 2" class="mr-2" onchange="updateAnswer(1, this.value)"/>
                            <label class="w-full bg-gray-200 p-2 rounded">Option 2</label>
                        </div>
                        <div class="flex items-center">
                            <input type="radio" name="option2" value="Option 3" class="mr-2" onchange="updateAnswer(1, this.value)"/>
                            <label class="w-full bg-gray-200 p-2 rounded">Option 3</label>
                        </div>
                        <div class="flex items-center">
                            <input type="radio" name="option2" value="Option 4" class="mr-2" onchange="updateAnswer(1, this.value)"/>
                            <label class="w-full bg-gray-200 p-2 rounded">Option 4</label>
                        </div>
                    </div>
                    <div class="flex justify-between items-center">
                        <button class="bg-white border border-gray-300 text-gray-700 py-2 px-4 rounded" onclick="prevQuiz()">Previous</button>
                        <button class="bg-white border border-gray-300 text-gray-700 py-2 px-4 rounded" id="next-button" onclick="nextQuiz()">Next</button>
                        <p class="text-sm" id="timer">Time: 30</p>
                    </div>
                </div>
                <!-- Add more quiz cards as needed -->
            </div>
            <div id="results" class="mt-4 p-4 bg-white rounded shadow-lg">
                <h2 class="text-xl font-bold mb-2">Your Results</h2>
                <div id="results-content"></div>
            </div>
        </div>
    </div>
    <footer class="text-center py-4 absolute bottom-0 bg-gray-50 left-[21.3rem] w-[75%]">
        <p class="text-gray-600">Npontu Learning Hub Â© 2024</p>
    </footer>
    <script>
        let currentQuiz = 0;
        const quizCards = document.querySelectorAll('.quiz-card');
        const answers = [];
        let timer;
        let timeLeft = 30;

        function showQuiz(index) {
            quizCards.forEach((card, i) => {
                card.classList.toggle('hidden', i !== index);
            });
            updateButton();
            startTimer();
        }

        function nextQuiz() {
            if (currentQuiz < quizCards.length - 1) {
                currentQuiz++;
                showQuiz(currentQuiz);
            } else {
                submitResults();
            }
        }

        function prevQuiz() {
            if (currentQuiz > 0) {
                currentQuiz--;
                showQuiz(currentQuiz);
            }
        }

        function updateAnswer(questionIndex, answer) {
            answers[questionIndex] = answer; // Store the answer for the current question
        }

        function startTimer() {
            clearInterval(timer);
            timeLeft = 30;
            document.getElementById('timer').innerText = `Time: ${timeLeft}`;
            timer = setInterval(() => {
                timeLeft--;
                document.getElementById('timer').innerText = `Time: ${timeLeft}`;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    alert("Time's up! Moving to the next question.");
                    nextQuiz();
                }
            }, 1000);
        }

        async function submitResults() {
            try {
                const response = await axios.post('YOUR_BACKEND_URL', { answers: answers });
                console.log('Success:', response.data);
                displayResults(response.data); // Display results on the UI
            } catch (error) {
                console.error('Error:', error);
                // Handle error (e.g., show an error message)
            }
        }

        function displayResults(data) {
            // Assuming 'data' contains the results in a format you want to display
            // For example, if 'data' is an array of correct answers:
            let resultsHtml = '';
            data.forEach((result, index) => {
                resultsHtml += `<p>Question ${index + 1}: Your answer: ${answers[index] || 'Not answered'}, Correct answer: ${result.correctAnswer}</p>`;
            });
            document.getElementById('results-content').innerHTML = resultsHtml;
            document.getElementById('results').style.display = 'block'; // Show the results section
        }

        function updateButton() {
            const nextButton = document.getElementById('next-button');
            if (currentQuiz === quizCards.length - 1) {
                nextButton.innerText = 'Submit';
            } else {
                nextButton.innerText = 'Next';
            }
        }

        // Initialize the first quiz card
        showQuiz(currentQuiz);
    </script>
</body>
</html>