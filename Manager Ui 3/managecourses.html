<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Management</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
    <link href="styles.css" rel="stylesheet">
</head>

<body class="bg-blue-50">
    <div class="d-flex bg-blue-50 h-[100vh] relative">
        <div class="w-64 bg-white shadow-md fixed left-0 h-screen">
            <img alt="Npontu Learning Hub Logo" class="w-full h-20 object-contain" height="70" src="./images/sign_in___sign_up/logo_u45.svg"/>
            <ul class="mt-16 text-black">
                <li class="px-4 py-2 hover:bg-gray-200">
                    <a class="block" href="./admin-dashboard.html">Dashboard</a>
                </li>
                <li class="px-4 py-2 hover:bg-gray-200">
                    <a class="block" href="./managecourses.html">Manage Courses</a>
                </li>
                <li class="px-4 py-2 hover:bg-gray-200">
                    <a class="block" href="./enrolment.html">Enrolment</a>
                </li>
                <li class="px-4 py-2 hover:bg-gray-200">
                    <a class="block" href="./users.html">User  Management</a>
                </li>
                <li class="px-4 py-2 hover:bg-gray-200">
                    <a class="block" href="./feedback.html">Feedback &amp; Surveys</a>
                </li>
                <li class="px-4 py-2 hover:bg-gray-200">
                    <a class="block" href="./report-and-analysis.html">Report &amp; Analytics</a>
                </li>
            </ul>
        </div>
        <div class="container-fluid absolute top-[2rem] left-[19rem] w-[75%]">
            <header class="flex justify-between items-center shadow-md p-4 mb-[5rem] bg-white">
                <h1 class="text-2xl font-bold text-blue-900">COURSE MANAGEMENT</h1>
                <div class="flex">
                    <span class="brightness bg-blue-200 w-[3rem] h-[1.7rem] rounded-[1rem] flex items-center px-[0.5rem]">
                        <i class="fas fa-moon text-blue-500"></i>
                    </span>
                </div>
            </header>
            <div class="row mt-3">
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body bg-gray-100">
                            <h5 class="card-title font-bold text-gray-900">Courses</h5>
                            <p class="card-text text-gray-900" id="overallCourses">0</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body bg-gray-100">
                            <h5 class="card-title font-bold text-gray-900">Completed</h5>
                            <p class="card-text text-gray-900">0</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body bg-gray-100">
                            <h5 class="card-title font-bold text-gray-900">Performance</h5>
                            <p class="card-text text-gray-900">0%</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-md-12">
                    <div class="d-flex justify-content-between">
                        <div class="d-flex">
                            <select class="form-control mr-2" id="contentType">
                                <option value="" disabled selected>Select Content Type</option>
                                <option>Audio</option>
                                <option>PDF</option>
                                <option>Video</option>
                                <option>Images</option>
                            </select>
                            <select class="form-control" id="category">
                                <option value="" disabled selected>Select Category</option>
                                <option>Technology</option>
                                <option>Philosophy</option>
                                <option>Finance</option>
                                <option>Entertainment</option>
                            </select>
                        </div>
                        <div>
                            <input type="text" class="form-control" placeholder="Find your course">
                        </div>
                        <div>
                            <button id="createCourseButton" class="btn btn-primary">Create Course</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-md-12">
                    <p id="totalCourses">Total courses: 0</p>
                </div>
            </div>
            <div id="courseContainer" class="row">
                <!-- Course cards will be dynamically added here -->
            </div>
            <div class="row mt-3">
                <div class="col-md-12">
                    <nav>
                        <ul class="pagination justify-content-center">
                            <li class="page-item"><a class="page-link" href="#" id="prevPage">Previous</a></li>
                            <li class="page-item"><a class="page-link" href="#" id="page1">1</a></li>
                            <li class="page-item"><a class="page-link" href="#" id="page2">2</a></li>
                            <li class="page-item"><a class="page-link" href="#" id="page3">3</a></li>
                            <li class="page-item"><a class="page-link" href="#" id="nextPage">Next</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="scripts.js"></script>
    <div class="modal fade" id="courseModal" tabindex="-1" aria-labelledby="courseModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="courseModalLabel">Create/Edit Course</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="courseForm">
                        <div class="form-group">
                            <label for="courseName">Course Name</label>
                            <input type="text" class="form-control" id="courseName" placeholder="Enter course name" required>
                        </div>
                        <div class="form-group">
                            <label for="instructorName">Instructor Name</label>
                            <input type="text" class="form-control" id="instructorName" placeholder="Enter instructor name" required>
                        </div>
                        <div class="form-group">
                            <label for="courseDate">Course Added Date</label>
                            <input type="date" class="form-control" id="courseDate" required>
                        </div>
                        <div class="form-group">
                            <label for="contentTypeModal">Content Type</label>
                            <select class="form-control" id="contentTypeModal" required>
                                <option value="" disabled selected>Select Content Type</option>
                                <option>Audio</option>
                                <option>PDF</option>
                                <option>Video</option>
                                <option>Images</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="categoryModal">Category</label>
                            <select class="form-control" id="categoryModal" required>
                                <option value="" disabled selected>Select Category</option>
                                <option>Technology</option>
                                <option>Philosophy</option>
                                <option>Finance</option>
                                <option>Entertainment</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="courseDescription">Course Description</label>
                            <textarea class="form-control" id="courseDescription" placeholder="Enter course description" required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="courseLevel">Course Level</label>
                            <input type="text" class="form-control" id="courseLevel" placeholder="Enter course level" required>
                        </div>
                        <div class="form-group">
                            <label for="rating">Rating (1-5)</label>
                            <input type="number" class="form-control" id="rating" placeholder="Enter Course Rating" min="1" max="5" required>
                        </div>
                        <div class="form-group">
                            <label for="courseImage">Course Image</label>
                            <input type="file" class="form-control-file" id="courseImage" accept="image/*" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="saveCourseButton">Save changes</button>
                </div>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const overallCoursesElement = document.getElementById('overallCourses');
            const totalCoursesElement = document.getElementById('totalCourses');

            // Set the total courses text to match the overall courses count initially
            totalCoursesElement.textContent = `Total courses: ${overallCoursesElement.textContent}`;
        });

        document.getElementById('saveCourseButton').addEventListener('click', function () {
            // Capture form data
            const courseName = document.getElementById('courseName').value;
            const instructorName = document.getElementById('instructorName').value;
            const courseDate = document.getElementById('courseDate').value;
            const contentType = document.getElementById('contentTypeModal').value;
            const category = document.getElementById('categoryModal').value;
            const courseDescription = document.getElementById('courseDescription').value;
            const courseLevel = document.getElementById('courseLevel').value;
            const rating = document.getElementById('rating').value;
            const courseImage = document.getElementById('courseImage').files[0];

            // Create a new course object
            const newCourse = {
                name: courseName,
                supervisor: instructorName,
                lastUpdated: courseDate,
                contentType: contentType,
                category: category,
                description: courseDescription,
                level: courseLevel,
                rating: rating,
                image: URL.createObjectURL(courseImage) // Create a URL for the image file
            };

            // Add the new course to the courses array
            courses.push(newCourse);

            // Increment the course count
            let totalCoursesElement = document.getElementById('totalCourses');
            let currentCount = parseInt(totalCoursesElement.textContent.match(/\d+/)[0]);
            totalCoursesElement.textContent = `Total courses: ${currentCount + 1}`;

            // Display the updated courses
            displayCourses(currentPage);
            updatePagination();

            // Close the modal after saving
            $('#courseModal').modal('hide');
        });

        const courses = []; // Array to hold course data
        const coursesPerPage = 10;
        let currentPage = 1;

        function displayCourses(page) {
            const start = (page - 1) * coursesPerPage;
            const end = start + coursesPerPage;
            const coursesToDisplay = courses.slice(start, end);

            const courseContainer = document.getElementById('courseContainer');
            courseContainer.innerHTML = ''; // Clear existing courses

            coursesToDisplay.forEach(course => {
                const courseCard = document.createElement('div');
                courseCard.className = 'col-md-3';
                courseCard.innerHTML = `
                <div class="card">
                    <img src="${course.image}" class="card-img-top" alt="Course Image">
                    <div class="card-body">
                        <h5 class="card-title">${course.supervisor}</h5>
                        <p class="card-text">Course Name: ${course.name}</p>
                        <p class="card-text">Course Description: ${course.description}</p>
                        <p class="card-text">Course Level: ${course.level}</p>
                        <p class="card-text">Last Updated: ${course.lastUpdated}</p>
                        <p class="card-text">Rating: ${course.rating} <span class="fa fa-star checked"></span></p>
                    </div>
                </div>
            `;
                courseContainer.appendChild(courseCard);
            });
        }

        function updatePagination() {
            document.getElementById('prevPage').parentElement.classList.toggle('disabled', currentPage === 1);
            document.getElementById('nextPage').parentElement.classList.toggle('disabled', currentPage === Math.ceil(courses.length / coursesPerPage));
        }

        document.getElementById('prevPage').addEventListener('click', function () {
            if (currentPage > 1) {
                currentPage--;
                displayCourses(currentPage);
                updatePagination();
            }
        });

        document.getElementById('nextPage').addEventListener('click', function () {
            if (currentPage < Math.ceil(courses.length / coursesPerPage)) {
                currentPage++;
                displayCourses(currentPage);
                updatePagination();
            }
        });

        document.getElementById('page1').addEventListener('click', function () {
            currentPage = 1;
            displayCourses(currentPage);
            updatePagination();
        });

        document.getElementById('page2').addEventListener('click', function () {
            currentPage = 2;
            displayCourses(currentPage);
            updatePagination();
        });

        document.getElementById('page3').addEventListener('click', function () {
            currentPage = 3;
            displayCourses(currentPage);
            updatePagination();
        });

        // Brightness toggle functionality
        const brightnessToggle = document.querySelector('.brightness');
        const icon = brightnessToggle.querySelector('i');

        function toggleBrightness() {
            // Check if the body has the dark class
            if (document.body.classList.contains('dark')) {
                // Remove dark class and set light theme
                document.body.classList.remove('dark');
                document.body.classList.remove('bg-gray-800');
                document.body.classList.add('bg-blue-50');
                document.body.classList.add('text-black');
                localStorage.setItem('color-theme', 'light');
                // Change icon to sun
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
                brightnessToggle.classList.remove('bg-blue-200');
                brightnessToggle.classList.add('bg-yellow-200');
            } else {
                // Add dark class and set dark theme
                document.body.classList.add('dark');
                document.body.classList.add('bg-gray-800');
                document.body.classList.remove('bg-blue-50');
                document.body.classList.remove('text-black');
                localStorage.setItem('color-theme', 'dark');
                // Change icon to moon
                icon.classList.remove('fa-sun');
                icon.classList.add('fa-moon');
                brightnessToggle.classList.remove('bg-yellow-200');
                brightnessToggle.classList.add('bg-blue-200');
            }
        }

        brightnessToggle.addEventListener('click', toggleBrightness);

        // Check local storage for theme preference
        if (localStorage.getItem('color-theme') === 'dark') {
            document.body.classList.add('dark');
            document.body.classList.add('bg-gray-800');
            document.body.classList.remove('bg-blue-50');
            document.body.classList.remove('text-black');
            icon.classList.remove('fa-moon');
            icon.classList.add('fa-sun');
            brightnessToggle.classList.remove('bg-blue-200');
            brightnessToggle.classList.add('bg-yellow-200');
        }

        // Initial display
        displayCourses(currentPage);
        updatePagination();
    </script>
</body>

</html>